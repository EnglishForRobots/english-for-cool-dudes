<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Check - English For Cool Dudes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #F3F4F6;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; margin: 0;
        }
        .phone-mockup {
            width: 100%; max-width: 400px; height: 100%; max-height: 850px;
            background: #FFFFFF; display: flex; flex-direction: column;
            position: relative; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden; margin: 20px 0;
        }
        @media (min-width: 640px) {
            .phone-mockup { height: 90vh; border-radius: 30px; border: 8px solid #1F2937; }
        }
        .chat-area {
            flex: 1; background: #E5E5F7; 
            background-image: radial-gradient(#444cf7 0.5px, transparent 0.5px), radial-gradient(#444cf7 0.5px, #e5e5f7 0.5px);
            background-size: 20px 20px; background-position: 0 0, 10px 10px;
            padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px;
        }
        .message { max-width: 85%; padding: 10px 14px; border-radius: 15px; font-size: 14px; line-height: 1.4; animation: popIn 0.3s; }
        .msg-npc { align-self: flex-start; background: #FFFFFF; color: #1F2937; border-bottom-left-radius: 2px; }
        .msg-user { align-self: flex-end; background: #3B82F6; color: white; border-bottom-right-radius: 2px; }
        .choices-container { padding: 15px; background: #FFFFFF; border-top: 1px solid #E5E7EB; display: flex; flex-direction: column; gap: 8px; }
        .choice-btn { background: #F9FAFB; border: 1px solid #E5E7EB; padding: 10px; border-radius: 10px; font-size: 13px; text-align: left; transition: 0.2s; cursor: pointer; }
        .choice-btn:hover { background: #EFF6FF; border-color: #3B82F6; }
        #menu-overlay, #game-over-overlay { position: absolute; inset: 0; background: #111827; z-index: 50; color: white; padding: 25px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .menu-btn { background: white; color: #111827; width: 100%; padding: 14px; margin-bottom: 10px; border-radius: 12px; font-weight: 700; }
        .vibe-bar-bg { width: 80px; height: 8px; background: #374151; border-radius: 4px; overflow: hidden; }
        .vibe-fill { height: 100%; background: #10B981; width: 50%; transition: width 0.4s; }
        @keyframes popIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

    <div class="phone-mockup">
        <div class="p-4 border-b flex items-center justify-between bg-white">
            <div class="flex items-center gap-3">
                <div id="npc-avatar" class="text-2xl">üëî</div>
                <div>
                    <div id="npc-name" class="font-bold text-sm">Boss</div>
                    <div class="text-[10px] text-green-500">‚óè Online</div>
                </div>
            </div>
            <div class="vibe-bar-bg"><div id="vibe-fill" class="vibe-fill"></div></div>
        </div>

        <div class="chat-area" id="chat-area"></div>
        <div class="choices-container" id="choices-area"></div>

        <div id="menu-overlay">
            <div class="text-5xl mb-4">üòé</div>
            <h1 class="text-3xl font-black mb-2 italic">VIBE CHECK</h1>
            <div class="bg-gray-800 p-4 rounded-xl mb-6 text-sm text-gray-300 leading-relaxed">
                <p class="mb-2 font-bold text-white">How to Play:</p>
                Navigate real-life social situations. Choose your responses wisely to keep the "Vibe Bar" high. Drop to zero, and you're blocked!
            </div>
            <p class="text-xs uppercase tracking-widest text-gray-500 mb-4 font-bold">Pick a Scenario</p>
            <button class="menu-btn" onclick="start('business')">üíº Professional</button>
            <button class="menu-btn" onclick="start('dating')">‚ù§Ô∏è Romantic</button>
            <button class="menu-btn" onclick="start('casual')">üõπ Casual Slang</button>
        </div>

        <div id="game-over-overlay" style="display:none;">
            <div id="end-emoji" class="text-6xl mb-4">üéâ</div>
            <h2 id="end-title" class="text-3xl font-black mb-2">PASSED</h2>
            <p id="end-desc" class="text-gray-400 mb-8 px-4"></p>
            <button class="menu-btn" onclick="location.reload()">Try Again</button>
        </div>
    </div>

    <script>
        const db = {
            business: [
                {
                    name: "Mr. Sterling", avatar: "üëî",
                    nodes: {
                        1: { text: "Where is the quarterly report? It was due an hour ago. üò°", options: [
                            { text: "My apologies. Finalizing the last page now, in your inbox in 5.", vibe: 15, next: 2 },
                            { text: "The file got corrupted! I'm rebuilding it as fast as I can.", vibe: 5, next: 2 },
                            { text: "I'm still on my lunch break. I'll get to it when I'm back.", vibe: -40, next: "fail" }
                        ]},
                        2: { text: "Fine. Also, I noticed you used 'lol' in a client email. Care to explain?", options: [
                            { text: "That was a total mistake. I'll resend a formal apology.", vibe: 15, next: 3 },
                            { text: "The client actually laughed! I thought it built rapport.", vibe: -10, next: 3 },
                            { text: "My keyboard is broken, it just types 'lol' on its own.", vibe: -30, next: "fail" }
                        ]},
                        3: { text: "We need to talk about your future here. Are you free at 4 PM?", options: [
                            { text: "Absolutely. I'll clear my schedule.", vibe: 20, next: "win" },
                            { text: "Can we do it tomorrow? I have a yoga class.", vibe: -15, next: "win" },
                            { text: "Only if there's a pay rise involved.", vibe: -50, next: "fail" }
                        ]},
                        "win": { text: "See you at 4. Don't be late.", end: true, win: true },
                        "fail": { text: "Actually, don't bother coming in tomorrow. Pack your things.", end: true, win: false }
                    }
                },
                {
                    name: "John (Client)", avatar: "ü§ù",
                    nodes: {
                        1: { text: "Half the shipment arrived broken! This is a disaster.", options: [
                            { text: "I am incredibly sorry. I'll resolve this right now.", vibe: 15, next: 2 },
                            { text: "That's weird. Our warehouse team is usually great.", vibe: 0, next: 2 },
                            { text: "Are you sure you didn't drop them yourself?", vibe: -50, next: "fail" }
                        ]},
                        2: { text: "I don't care about apologies. I want a solution.", options: [
                            { text: "I'll issue a full refund immediately.", vibe: 20, next: "3_refund" },
                            { text: "I'll ship a replacement express today.", vibe: 20, next: 3 },
                            { text: "I can offer you a 5% discount on your next order.", vibe: -10, next: 3 }
                        ]},
                        3: { text: "A replacement is the bare minimum. When will it arrive?", options: [
                            { text: "It will be at your door by 10 AM tomorrow.", vibe: 20, next: "win" },
                            { text: "Next week, hopefully.", vibe: -10, next: "win" },
                            { text: "When the truck gets there, John. Relax.", vibe: -40, next: "fail" }
                        ]},
                        "3_refund": { text: "A refund is fair. When will I see the money?", options: [
                            { text: "It's already been processed. Check your bank by Monday.", vibe: 20, next: "win" },
                            { text: "In 30 to 60 business days.", vibe: -15, next: "win" },
                            { text: "Why are you so obsessed with money?", vibe: -40, next: "fail" }
                        ]},
                        "win": { text: "I appreciate the quick response. We'll keep the contract for now.", end: true, win: true },
                        "fail": { text: "I'm calling my lawyer. We are done.", end: true, win: false }
                    }
                }
            ],
            dating: [
                {
                    name: "Sarah", avatar: "üåπ",
                    nodes: {
                        1: { text: "Hey! You're that guy from the bookstore, right? üìö", options: [
                            { text: "Guilty! I was the one struggling with the top shelf.", vibe: 20, next: 2 },
                            { text: "Yeah, that's me. You have a good memory!", vibe: 10, next: 2 },
                            { text: "Are you stalking me? Lol.", vibe: -15, next: 2 }
                        ]},
                        2: { text: "Haha! Well, I'm going to a jazz club tonight. Want to join?", options: [
                            { text: "I'd love to! Jazz is my favorite. What's the address?", vibe: 20, next: "win" },
                            { text: "I'm more of a techno person, but let's do it.", vibe: 5, next: "win" },
                            { text: "I'm actually staying in to play video games.", vibe: -30, next: "fail" }
                        ]},
                        "win": { text: "Awesome! See you at 9 PM. Dress sharp! ‚ú®", end: true, win: true },
                        "fail": { text: "Oh... okay. Have fun with your games then.", end: true, win: false }
                    }
                }
            ],
            casual: [
                {
                    name: "Lisa", avatar: "üõπ",
                    nodes: {
                        1: { text: "This weekend is gonna be mid unless we do something.", options: [
                            { text: "No cap! Let's find a move. What's the vibe?", vibe: 20, next: 2 },
                            { text: "I agree. We should definitely go out.", vibe: 10, next: 2 },
                            { text: "I like 'mid' weekends. They are relaxing.", vibe: -20, next: 2 }
                        ]},
                        2: { text: "Road trip to the mountains or just hitting the beach?", options: [
                            { text: "Mountains! I need that fresh air.", vibe: 15, next: "3_mtn" },
                            { text: "Beach for sure. I need a tan.", vibe: 15, next: 3 },
                            { text: "Let's just stay home and order pizza.", vibe: -10, next: 3 }
                        ]},
                        3: { text: "Beach it is! But I'm broke. Can you drive?", options: [
                            { text: "I got you! I'll pick you up at 8.", vibe: 20, next: "win" },
                            { text: "Only if you pay for the gas.", vibe: 0, next: "win" },
                            { text: "Nah, my car is too clean for sandy feet.", vibe: -40, next: "fail" }
                        ]},
                        "3_mtn": { text: "Mountains! But it's freezing up there.", options: [
                            { text: "I'll bring the hot cocoa and blankets!", vibe: 20, next: "win" },
                            { text: "We'll just stay in the car with the heater on.", vibe: 0, next: "win" },
                            { text: "True, let's just go to the beach instead.", vibe: -10, next: 3 }
                        ]},
                        "win": { text: "Let's gooo! This is gonna be epic.", end: true, win: true },
                        "fail": { text: "Wow, you're a buzzkill. I'll ask someone else.", end: true, win: false }
                    }
                }
            ]
        };

        let current = null;
        let vibe = 50;
        let nodeId = 1;

        function start(cat) {
            const list = db[cat];
            current = list[Math.floor(Math.random() * list.length)];
            document.getElementById('menu-overlay').style.display = 'none';
            document.getElementById('npc-name').innerText = current.name;
            document.getElementById('npc-avatar').innerText = current.avatar;
            vibe = 50; nodeId = 1;
            document.getElementById('chat-area').innerHTML = '';
            updateVibe();
            render();
        }

        function render() {
            const node = current.nodes[nodeId];
            addMsg(node.text, 'npc');
            const area = document.getElementById('choices-area');
            area.innerHTML = '';

            if (node.end) {
                setTimeout(() => end(node.win), 1000);
                return;
            }

            node.options.forEach(o => {
                const b = document.createElement('button');
                b.className = 'choice-btn';
                b.innerText = o.text;
                b.onclick = () => {
                    area.innerHTML = '';
                    addMsg(o.text, 'user');
                    vibe += o.vibe;
                    updateVibe();
                    if (vibe <= 0) return end(false);
                    nodeId = o.next;
                    setTimeout(render, 800);
                };
                area.appendChild(b);
            });
        }

        function addMsg(t, type) {
            const d = document.createElement('div');
            d.className = `message msg-${type}`;
            d.innerText = t;
            const c = document.getElementById('chat-area');
            c.appendChild(d);
            c.scrollTop = c.scrollHeight;
        }

        function updateVibe() {
            if (vibe > 100) vibe = 100;
            document.getElementById('vibe-fill').style.width = vibe + '%';
        }

        function end(win) {
            const o = document.getElementById('game-over-overlay');
            o.style.display = 'flex';
            document.getElementById('end-emoji').innerText = win ? "üéâ" : "üö´";
            document.getElementById('end-title').innerText = win ? "VIBE PASSED" : "VIBE FAILED";
            document.getElementById('end-desc').innerText = win ? 
                "You handled that like a pro. Your social score is legendary." : 
                "That was awkward. You've been left on read... forever.";
        }
    </script>
</body>
</html>
