<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Vibe Check - English For Cool Dudes</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #F3F4F6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
        }

        .phone-mockup {
            width: 100%; max-width: 400px; height: 100%; max-height: 850px;
            background: #FFFFFF; display: flex; flex-direction: column;
            position: relative; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden; margin: 20px 0;
        }

        @media (min-width: 640px) {
            .phone-mockup { height: 90vh; border-radius: 30px; border: 8px solid #1F2937; }
        }

        .header {
            width: 100%; background: #FFFFFF; border-bottom: 1px solid #E2E8F0;
            padding: 15px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.04);
            display: flex; justify-content: center; z-index: 100;
        }

        .header-content { width: 100%; max-width: 1000px; padding: 0 20px; display: flex; align-items: center; gap: 15px; }
        .logo { width: 36px; height: 36px; background: linear-gradient(135deg, #0EA5E9 0%, #8B5CF6 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .site-title { font-size: 20px; font-weight: 600; color: #0F172A; text-decoration: none; }

        .chat-header { background: #F9FAFB; padding: 15px; border-bottom: 1px solid #E5E7EB; display: flex; align-items: center; justify-content: space-between; }
        .avatar { width: 45px; height: 45px; background: #E5E7EB; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .vibe-container { width: 80px; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden; }
        .vibe-fill { height: 100%; background: #10B981; width: 50%; transition: width 0.5s; }

        .chat-area {
            flex: 1; background: #E5E5F7; 
            background-image: radial-gradient(#444cf7 0.5px, transparent 0.5px), radial-gradient(#444cf7 0.5px, #e5e5f7 0.5px);
            background-size: 20px 20px; background-position: 0 0, 10px 10px;
            padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px;
        }

        .message { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 15px; animation: popIn 0.3s; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .msg-npc { align-self: flex-start; background: #FFFFFF; color: #1F2937; border-bottom-left-radius: 4px; }
        .msg-user { align-self: flex-end; background: #3B82F6; color: white; border-bottom-right-radius: 4px; }
        .msg-coach { align-self: center; background: rgba(255, 255, 255, 0.95); border: 1px dashed #EF4444; color: #EF4444; font-size: 12px; font-weight: 700; padding: 8px 14px; border-radius: 15px; }

        .choices-container { padding: 15px; background: #FFFFFF; border-top: 1px solid #E5E7EB; display: flex; flex-direction: column; gap: 8px; }
        .choice-btn { background: #F3F4F6; border: 1px solid #E5E7EB; padding: 12px; border-radius: 12px; font-size: 14px; cursor: pointer; transition: all 0.2s; }
        .choice-btn:hover { background: #DBEAFE; border-color: #3B82F6; color: #1D4ED8; }

        #menu-overlay, #game-over-overlay { position: absolute; inset: 0; background: #111827; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; color: white; padding: 30px; text-align: center; }
        .menu-btn { background: white; color: #111827; width: 100%; padding: 15px; margin-bottom: 12px; border-radius: 12px; font-weight: 700; cursor: pointer; border: none; }
        
        @keyframes popIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header class="header">
        <div class="header-content">
            <span class="logo">ðŸŽ®</span>
            <a href="#" class="site-title">English For Cool Dudes</a>
        </div>
    </header>

    <div class="phone-mockup">
        <div class="chat-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div class="avatar" id="npc-avatar">ðŸ‘”</div>
                <div>
                    <div style="font-weight: 700; font-size: 15px;" id="npc-name">The Boss</div>
                    <div style="font-size: 11px; color: #6B7280;">Online</div>
                </div>
            </div>
            <div class="vibe-container"><div class="vibe-fill" id="vibe-bar"></div></div>
        </div>

        <div class="chat-area" id="chat-area"></div>
        <div class="choices-container" id="choices-area"></div>

        <div id="menu-overlay">
            <h1 style="font-size: 32px; font-weight: 800; margin-bottom: 10px;">ðŸ’¬ Vibe Check</h1>
            <p style="color: #9CA3AF; margin-bottom: 30px;">Select a Category to Start</p>
            <button class="menu-btn" onclick="pickScenario('business')">ðŸ‘” Business</button>
            <button class="menu-btn" onclick="pickScenario('dating')">ðŸŒ¹ Social / Dating</button>
            <button class="menu-btn" onclick="pickScenario('casual')">ðŸ§¢ Slang / Friends</button>
        </div>

        <div id="game-over-overlay" style="display:none;">
            <div style="font-size: 60px;" id="end-emoji">ðŸŽ‰</div>
            <h2 style="font-size: 28px; font-weight: 700;" id="end-title">PASSED!</h2>
            <p id="end-reason" style="margin-bottom: 20px;"></p>
            <button class="menu-btn" onclick="location.reload()">ðŸ”„ Play Again</button>
        </div>
    </div>

    <script>
        const scenarioDB = {
            business: [
                {
                    name: "Mr. Sterling", avatar: "ðŸ‘”", startNode: 1,
                    nodes: {
                        1: { text: "Where is the quarterly report? It was due an hour ago. ðŸ˜¡", options: [
                            { text: "I'm finalizing it now. In your inbox in 10 mins.", vibe: 10, next: 2 },
                            { text: "I'm so sorry! I completely forgot.", vibe: -30, next: 2 }
                        ]},
                        2: { text: "Wait, I see a typo in your last email. You wrote 'We look forward to hare from you'.", options: [
                            { text: "I apologize, I'll fix it to 'hearing' right away.", vibe: 20, next: 3 },
                            { text: "My bad, I'll resend the correction now.", vibe: 10, next: 3 }
                        ]},
                        3: { text: "Better. Are you available for a client call at 5 PM?", options: [
                            { text: "I can make myself available for that.", vibe: 20, next: "win" },
                            { text: "No, I usually leave at 4:30.", vibe: -40, next: "fail" }
                        ]},
                        "win": { text: "Excellent. Send the invite.", end: true, win: true },
                        "fail": { text: "I need someone more dedicated. We'll talk tomorrow.", end: true, win: false }
                    }
                },
                {
                    name: "Client (John)", avatar: "ðŸ¤", startNode: 1,
                    nodes: {
                        1: { text: "We received the shipment, but half the items are broken! ðŸ¤¬", options: [
                            { text: "Oh no! Let me look into that immediately.", vibe: 20, next: 2 },
                            { text: "Maybe the postman dropped it?", vibe: -20, next: 2 }
                        ]},
                        2: { text: "You better fix this or we are cancelling the contract.", options: [
                            { text: "I'll process a full refund for you.", vibe: 20, next: "3_refund" },
                            { text: "I'll send a replacement immediately.", vibe: 20, next: 3 }
                        ]},
                        3: { text: "A replacement sounds acceptable. When will it arrive?", options: [
                            { text: "We are shipping it express today.", vibe: 30, next: "win" },
                            { text: "It should be there by next week.", vibe: -10, next: "win" }
                        ]},
                        "3_refund": { text: "A refund sounds acceptable. When will I see the money?", options: [
                            { text: "It will be in your account by Monday.", vibe: 30, next: "win" },
                            { text: "I'll process it right now.", vibe: 20, next: "win" }
                        ]},
                        "win": { text: "Thanks for fixing this so quickly.", end: true, win: true }
                    }
                }
            ],
            dating: [
                {
                    name: "Sarah", avatar: "ðŸŒ¹", startNode: 1,
                    nodes: {
                        1: { text: "Hey! Just saw your profile. You seem fun. ðŸ˜Š", options: [
                            { text: "Hey! Thanks, you too. How's your week?", vibe: 20, next: 2 },
                            { text: "I know, I get that a lot.", vibe: -10, next: 2 }
                        ]},
                        2: { text: "Busy! I need a break. I love Italian food btw. ðŸ", options: [
                            { text: "I love Italian! Let's grab dinner this weekend.", vibe: 20, next: 4 },
                            { text: "Actually, I'm not a big fan of Italian food.", vibe: 0, next: "3b" }
                        ]},
                        "3b": { text: "Oh! Well what kind of food DO you like?", options: [
                            { text: "How about Sushi or Mexican?", vibe: 10, next: 4 },
                            { text: "I'm down for anything, you pick!", vibe: 20, next: 4 }
                        ]},
                        4: { text: "Ooh I'd love that! Saturday night? ðŸ¥‚", options: [
                            { text: "Saturday works perfectly for me.", vibe: 20, next: "win" },
                            { text: "Maybe. I'll have to check my schedule.", vibe: -20, next: "win" }
                        ]},
                        "win": { text: "Can't wait! See you then ðŸ˜˜", end: true, win: true }
                    }
                }
            ],
            casual: [
                {
                    name: "Lisa", avatar: "âœˆï¸", startNode: 1,
                    nodes: {
                        1: { text: "I'm so bored. We should do something this weekend.", options: [
                            { text: "Totally! Any ideas?", vibe: 20, next: 2 },
                            { text: "I'm actually kind of busy studying.", vibe: -20, next: 2 }
                        ]},
                        2: { text: "I was thinking maybe a road trip? Or the beach?", options: [
                            { text: "A trip to the beach sounds perfect!", vibe: 20, next: 3 },
                            { text: "Let's go on a road trip!", vibe: 20, next: "3_road" }
                        ]},
                        3: { text: "Beach sounds perfect! But I don't have a car. ðŸš—", options: [
                            { text: "I can drive us!", vibe: 30, next: "win" },
                            { text: "We can just take the train.", vibe: 10, next: "win" }
                        ]},
                        "3_road": { text: "A road trip would be epic! But I don't have a car. ðŸš—", options: [
                            { text: "I can drive us!", vibe: 30, next: "win" },
                            { text: "We can rent one for the day.", vibe: 10, next: "win" }
                        ]},
                        "win": { text: "Awesome! I'll pack the sunscreen. â˜€ï¸", end: true, win: true }
                    }
                }
            ]
        };

        let currentScenario = null;
        let currentNodeId = 1;
        let vibe = 50;

        function pickScenario(cat) {
            const list = scenarioDB[cat];
            currentScenario = list[Math.floor(Math.random() * list.length)];
            document.getElementById('menu-overlay').style.display = 'none';
            start();
        }

        function start() {
            currentNodeId = 1;
            vibe = 50;
            document.getElementById('chat-area').innerHTML = '';
            document.getElementById('npc-name').innerText = currentScenario.name;
            document.getElementById('npc-avatar').innerText = currentScenario.avatar;
            renderNode();
        }

        function renderNode() {
            const node = currentScenario.nodes[currentNodeId];
            addMsg(node.text, 'npc');
            
            if (node.end) {
                setTimeout(() => finish(node.win), 1500);
                return;
            }

            const area = document.getElementById('choices-area');
            area.innerHTML = '';
            node.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerText = opt.text;
                btn.onclick = () => {
                    addMsg(opt.text, 'user');
                    vibe += opt.vibe;
                    updateVibe();
                    area.innerHTML = '';
                    if (vibe <= 0) return finish(false);
                    currentNodeId = opt.next;
                    setTimeout(renderNode, 800);
                };
                area.appendChild(btn);
            });
        }

        function addMsg(txt, type) {
            const div = document.createElement('div');
            div.className = `message msg-${type}`;
            div.innerText = txt;
            const chat = document.getElementById('chat-area');
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }

        function updateVibe() {
            if (vibe > 100) vibe = 100;
            document.getElementById('vibe-bar').style.width = vibe + '%';
        }

        function finish(win) {
            const over = document.getElementById('game-over-overlay');
            over.style.display = 'flex';
            document.getElementById('end-title').innerText = win ? "VIBE PASSED!" : "BLOCKED";
            document.getElementById('end-emoji').innerText = win ? "ðŸŽ‰" : "ðŸš«";
            document.getElementById('end-reason').innerText = win ? "You kept the conversation flowing!" : "Your vibe dropped to zero.";
        }
    </script>
</body>
</html>
