<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journey Through England</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 50%, #e74c3c 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            position: relative;
        }
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #e74c3c 33%, #ffffff 33% 66%, #3498db 66%);
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: 'üè∞';
            position: absolute;
            top: 20px;
            left: 30px;
            font-size: 3em;
            animation: float 3s ease-in-out infinite;
        }
        .header::after {
            content: '‚òÇÔ∏è';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 3em;
            animation: float 3s ease-in-out infinite 1.5s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-family: 'Georgia', serif;
        }
        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            font-style: italic;
        }
        .game-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .stat-item {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
        }
        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            display: block;
            color: #f1c40f;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }
        .progress-bar {
            width: 100%;
            height: 18px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #f1c40f, #e74c3c, #3498db);
            border-radius: 10px;
            width: 0%;
            transition: width 0.8s ease;
            position: relative;
        }
        .progress::after {
            content: 'üëë';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.3em;
            animation: crown-bounce 2s infinite;
        }
        @keyframes crown-bounce {
            0%, 100% { transform: translateY(-50%) rotate(-5deg); }
            50% { transform: translateY(-60%) rotate(5deg); }
        }
        .lesson-content {
            padding: 30px;
        }
        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s;
        }
        .section:hover::before {
            left: 100%;
        }
        .section:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .warmup { background: linear-gradient(135deg, #f39c12, #e67e22); }
        .listening { background: linear-gradient(135deg, #3498db, #2980b9); }
        .vocab { background: linear-gradient(135deg, #27ae60, #229954); }
        .pronunciation { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
        .quiz { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .challenge { background: linear-gradient(135deg, #e91e63, #ad1457); }
        .comprehension { background: linear-gradient(135deg, #16a085, #138d75); }
        .analysis { background: linear-gradient(135deg, #f4d03f, #f1c40f); }
        .drag-drop { background: linear-gradient(135deg, #af7ac5, #8e44ad); }
        .word-chain { background: linear-gradient(135deg, #5dade2, #3498db); }

        .section-title {
            font-size: 2em;
            margin-bottom: 20px;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        .emoji {
            font-size: 1.2em;
            animation: wiggle 2s ease-in-out infinite;
        }
        @keyframes wiggle {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }
        .level-badge {
            background: rgba(0,0,0,0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 0.6em;
            position: absolute;
            right: 0;
            animation: glow 3s infinite;
            backdrop-filter: blur(5px);
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(255,255,255,0.5); }
            50% { box-shadow: 0 0 20px rgba(255,255,255,0.8); }
        }
        
        .story-box, .reading-text {
            background: white;
            padding: 30px;
            border-radius: 15px;
            border-left: 5px solid #3498db;
            font-size: 1.15em;
            line-height: 1.9;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        .story-box::before {
            content: 'üìñ';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5em;
            opacity: 0.7;
        }
        
        .quiz-container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #e74c3c, #f39c12, #f1c40f);
        }
        
        .question-counter {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .quiz-question {
            font-size: 1.3em;
            margin-bottom: 25px;
            color: #2c3e50;
            font-weight: 600;
            line-height: 1.4;
        }
        .quiz-options {
            display: grid;
            gap: 15px;
        }
        .quiz-option {
            background: #f8f9fa;
            border: 3px solid #ecf0f1;
            padding: 18px 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            position: relative;
            overflow: hidden;
        }
        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(52,152,219,0.1), transparent);
            transition: left 0.5s;
        }
        .quiz-option:hover::before {
            left: 100%;
        }
        .quiz-option:hover {
            background: #e8f4fd;
            border-color: #3498db;
            transform: translateX(10px);
        }
        .quiz-option.correct {
            background: linear-gradient(135deg, #27ae60, #2ecc71) !important;
            color: white !important;
            border-color: #27ae60 !important;
            animation: success-pulse 0.6s ease;
        }
        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .quiz-option.incorrect {
            background: linear-gradient(135deg, #e74c3c, #c0392b) !important;
            color: white !important;
            border-color: #e74c3c !important;
            animation: error-shake 0.5s ease;
        }
        @keyframes error-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .btn {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 18px 35px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.2em;
            margin: 20px 15px;
            transition: all 0.4s ease;
            box-shadow: 0 8px 25px rgba(44, 62, 80, 0.3);
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }
        .btn:hover::before {
            left: 100%;
        }
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(44, 62, 80, 0.4);
        }
        
        .achievement {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            animation: achievement-slide 0.8s ease;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 320px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        @keyframes achievement-slide {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .feedback-box {
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.15em;
            animation: feedback-appear 0.6s ease;
            backdrop-filter: blur(10px);
        }
        @keyframes feedback-appear {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .feedback-box.excellent {
            background: linear-gradient(135deg, rgba(39,174,96,0.9), rgba(46,204,113,0.9));
            border-left: 5px solid #27ae60;
            color: white;
        }
        .feedback-box.needs-improvement {
            background: linear-gradient(135deg, rgba(231,76,60,0.9), rgba(192,57,43,0.9));
            border-left: 5px solid #e74c3c;
            color: white;
        }

        /* Pronunciation Challenge - Match Game */
        .match-game-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            flex-wrap: wrap;
        }
        .match-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
            flex: 1;
            min-width: 250px;
        }
        .match-item {
            background: #ffffff;
            color: #8e44ad;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-weight: bold;
            text-align: center;
            border: 2px solid transparent;
        }
        .match-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }
        .match-item.selected {
            border-color: #f39c12;
            transform: scale(1.05);
        }
        .match-item.correct {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.5);
            pointer-events: none;
        }
        .match-item.incorrect {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.5);
            animation: error-shake 0.5s ease;
        }
        
        .youtube-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            font-size: 1.1em;
            color: white;
        }

        /* Drag and Drop */
        .drag-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }
        .drag-source, .drag-target {
            background: white;
            padding: 25px;
            border-radius: 15px;
            min-height: 200px;
        }
        .drag-source {
            border: 3px dashed #8e44ad;
        }
        .drag-target {
            border: 3px dashed #27ae60;
        }
        .draggable-item {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 25px;
            cursor: move;
            transition: all 0.3s ease;
            display: inline-block;
            user-select: none;
        }
        .draggable-item:hover {
            transform: scale(1.05);
        }
        .drop-zone {
            min-height: 50px;
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
            margin: 10px 0;
            padding: 15px;
            transition: all 0.3s ease;
        }
        .drop-zone.drag-over {
            border-color: #27ae60;
            background: #e8f8f5;
        }

        /* Word Chain */
        .word-chain-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        .chain-word {
            display: inline-block;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 25px;
            margin: 8px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            position: relative;
        }
        .chain-word::after {
            content: '‚Üí';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            color: #3498db;
            font-size: 1.5em;
        }
        .chain-word:last-child::after {
            display: none;
        }
        .chain-input {
            background: #f8f9fa;
            border: 3px solid #3498db;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1.2em;
            margin: 10px;
            text-align: center;
            width: 200px;
        }

        /* Difficult word dictionary */
        .difficult-word {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 2px 8px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .difficult-word:hover {
            transform: scale(1.1);
        }
        .dictionary-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
            z-index: 1000;
            text-align: center;
            animation: popup-appear 0.4s ease;
            display: none;
            max-width: 400px;
        }
        @keyframes popup-appear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        .dictionary-popup h4 {
            margin-bottom: 15px;
            font-size: 1.8em;
            color: #f39c12;
        }
        .dictionary-popup p {
            margin-bottom: 20px;
            font-size: 1.1em;
            line-height: 1.5;
        }
        .close-popup {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            border: none;
            transition: all 0.3s ease;
        }
        .close-popup:hover {
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2em; }
            .section { margin-bottom: 25px; padding: 20px; }
            .game-stats { grid-template-columns: repeat(2, 1fr); }
            .drag-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üá¨üáß A Journey Through England</h1>
            <p class="subtitle">Advanced Intermediate English Practice</p>

            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-number" id="score">0</span>
                    <span class="stat-label">POINTS</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="level">1</span>
                    <span class="stat-label">LEVEL</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="streak">0</span>
                    <span class="stat-label">STREAK</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="achievements">0</span>
                    <span class="stat-label">üèÜ BADGES</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
        </div>

        <div class="lesson-content">
            <div class="section pronunciation">
                <h2 class="section-title">
                    <span class="emoji">üó£Ô∏è</span>Pronunciation Match-Up!
                    <span class="level-badge">LEVEL 1</span>
                </h2>
                <p style="color: white; margin-bottom: 20px; font-size: 1.1em;">Match the English place name to its correct pronunciation!</p>
                
                <div class="match-game-container">
                    <div class="match-column" id="spelling-column">
                        </div>
                    <div class="match-column" id="pronunciation-column">
                        </div>
                </div>

                <a href="https://www.youtube.com/watch?v=AW3KJB6CuJA" target="_blank" class="youtube-link">Watch this video for more tricky pronunciations!</a>

            </div>

            <div class="section comprehension">
                <h2 class="section-title">
                    <span class="emoji">üè∞</span>Reading Comprehension
                    <span class="level-badge">LEVEL 2</span>
                </h2>

                <div class="reading-text">
                    <p>England, part of the United Kingdom, has a rich <span class="difficult-word" data-definition="the traditions, achievements, beliefs, etc., that are part of the history of a group or nation">heritage</span> spanning over a millennium. From the <span class="difficult-word" data-definition="relating to the Middle Ages in Europe (roughly 5th to 15th centuries)">medieval</span> castles dotting the countryside to the bustling streets of London, England offers a fascinating blend of history and modernity.</p>
                    
                    <p>The <span class="difficult-word" data-definition="relating to the reign of Queen Victoria (1837-1901)">Victorian</span> era left an <span class="difficult-word" data-definition="impossible to remove or forget">indelible</span> mark on English architecture and culture. Grand railway stations, ornate public buildings, and rows of terraced houses still characterize many English cities today. This period also saw the expansion of the British Empire, making England a global <span class="difficult-word" data-definition="a dominant position or controlling influence">superpower</span>.</p>
                    
                    <p>Modern England is known for its contributions to literature, music, and science. From Shakespeare to The Beatles, from Newton to Hawking, English <span class="difficult-word" data-definition="people who create new ideas, methods, or products">innovators</span> have shaped world culture and knowledge. The English education system, particularly universities like Oxford and Cambridge, continues to attract students from around the globe.</p>
                </div>

                <div class="quiz-container" data-correct-answer="medieval">
                    <div class="question-counter">Question 1/4</div>
                    <div class="quiz-question">What type of castles are mentioned as dotting the English countryside?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">Victorian</div>
                        <div class="quiz-option">medieval</div>
                        <div class="quiz-option">Roman</div>
                        <div class="quiz-option">modern</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="Victorian era">
                    <div class="question-counter">Question 2/4</div>
                    <div class="quiz-question">Which historical period left a major mark on English architecture?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">Tudor period</div>
                        <div class="quiz-option">Georgian era</div>
                        <div class="quiz-option">Victorian era</div>
                        <div class="quiz-option">Edwardian period</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="Oxford and Cambridge">
                    <div class="question-counter">Question 3/4</div>
                    <div class="quiz-question">Which two universities are specifically mentioned as attracting global students?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">Imperial and UCL</div>
                        <div class="quiz-option">Oxford and Cambridge</div>
                        <div class="quiz-option">Bristol and Bath</div>
                        <div class="quiz-option">Manchester and Liverpool</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="literature, music, and science">
                    <div class="question-counter">Question 4/4</div>
                    <div class="quiz-question">What three areas is modern England known for contributing to?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">sports, food, and technology</div>
                        <div class="quiz-option">art, fashion, and film</div>
                        <div class="quiz-option">literature, music, and science</div>
                        <div class="quiz-option">politics, business, and medicine</div>
                    </div>
                </div>
            </div>

            <div class="section drag-drop">
                <h2 class="section-title">
                    <span class="emoji">üéØ</span>Drag & Drop: English Regions & Features
                    <span class="level-badge">LEVEL 3</span>
                </h2>
                <p style="color: white; margin-bottom: 20px; font-size: 1.1em;">Drag the famous landmarks to their correct regions!</p>
                
                <div class="story-box" style="margin-bottom: 25px;">
                    <h3 style="margin-bottom: 15px; color: #2c3e50;">Quick Guide to English Regions & Landmarks:</h3>
                    <p><strong>London:</strong> England's capital city, home to Big Ben (famous clock tower) and Tower Bridge</p>
                    <p><strong>Lake District:</strong> Beautiful national park in northwest England, famous for its lakes like Windermere</p>
                    <p><strong>Cornwall:</strong> Southwest peninsula known for the Eden Project (giant biodomes)</p>
                    <p><strong>Yorkshire:</strong> Northern county famous for the Yorkshire Dales (rolling hills and valleys)</p>
                    <p><strong>Bath:</strong> Historic city in southwest England, famous for ancient Roman Baths</p>
                </div>
                
                <div class="drag-container">
                    <div class="drag-source">
                        <h3 style="text-align: center; margin-bottom: 15px; color: #8e44ad;">Landmarks</h3>
                        <div class="draggable-item" draggable="true" data-region="London">Big Ben</div>
                        <div class="draggable-item" draggable="true" data-region="Lake District">Lake Windermere</div>
                        <div class="draggable-item" draggable="true" data-region="Cornwall">Eden Project</div>
                        <div class="draggable-item" draggable="true" data-region="Yorkshire">Yorkshire Dales</div>
                        <div class="draggable-item" draggable="true" data-region="London">Tower Bridge</div>
                        <div class="draggable-item" draggable="true" data-region="Bath">Roman Baths</div>
                    </div>
                    <div class="drag-target">
                        <h3 style="text-align: center; margin-bottom: 15px; color: #27ae60;">Regions</h3>
                        <div class="drop-zone" data-region="London">
                            <strong>London</strong>
                        </div>
                        <div class="drop-zone" data-region="Lake District">
                            <strong>Lake District</strong>
                        </div>
                        <div class="drop-zone" data-region="Cornwall">
                            <strong>Cornwall</strong>
                        </div>
                        <div class="drop-zone" data-region="Yorkshire">
                            <strong>Yorkshire</strong>
                        </div>
                        <div class="drop-zone" data-region="Bath">
                            <strong>Bath</strong>
                        </div>
                    </div>
                </div>
                
                <button class="btn" onclick="checkDragDrop()">üéØ Check Placement</button>
            </div>

          

            <div class="section quiz">
                <h2 class="section-title">
                    <span class="emoji">üìö</span>Advanced Grammar: Conditionals
                    <span class="level-badge">LEVEL 4</span>
                </h2>

                <div class="quiz-container" data-correct-answer="If I had visited England last year, I would have seen the coronation preparations.">
                    <div class="question-counter">Question 1/3</div>
                    <div class="quiz-question">Choose the correct third conditional sentence about England:</div>
                    <div class="quiz-options">
                        <div class="quiz-option">If I would visit England last year, I had seen the coronation preparations.</div>
                        <div class="quiz-option">If I had visited England last year, I would have seen the coronation preparations.</div>
                        <div class="quiz-option">If I visit England last year, I would see the coronation preparations.</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="If you were living in Victorian England, you would experience very different social conditions.">
                    <div class="question-counter">Question 2/3</div>
                    <div class="quiz-question">Choose the correct second conditional about historical England:</div>
                    <div class="quiz-options">
                        <div class="quiz-option">If you lived in Victorian England, you will experience very different social conditions.</div>
                        <div class="quiz-option">If you would live in Victorian England, you experienced very different social conditions.</div>
                        <div class="quiz-option">If you were living in Victorian England, you would experience very different social conditions.</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="If it rains tomorrow, we'll visit the British Museum instead of walking in Hyde Park.">
                    <div class="question-counter">Question 3/3</div>
                    <div class="quiz-question">Choose the correct first conditional about visiting England:</div>
                    <div class="quiz-options">
                        <div class="quiz-option">If it will rain tomorrow, we visit the British Museum instead of walking in Hyde Park.</div>
                        <div class="quiz-option">If it rained tomorrow, we would visit the British Museum instead of walking in Hyde Park.</div>
                        <div class="quiz-option">If it rains tomorrow, we'll visit the British Museum instead of walking in Hyde Park.</div>
                    </div>
                </div>
            </div>

            <div class="section analysis">
                <h2 class="section-title">
                    <span class="emoji">üé≠</span>Cultural Analysis: British Expressions
                    <span class="level-badge">LEVEL 5</span>
                </h2>

                <div class="story-box">
                    <p><strong>Scenario:</strong> You're visiting England and hear these expressions. What do they really mean?</p>
                </div>

                <div class="quiz-container" data-correct-answer="It's not very good, but I'm being polite">
                    <div class="quiz-question">An English person says: "It's not bad." What do they likely mean?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">It's not very good, but I'm being polite</div>
                        <div class="quiz-option">It's absolutely terrible</div>
                        <div class="quiz-option">It's excellent and I love it</div>
                        <div class="quiz-option">It's exactly average quality</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="I completely disagree with you">
                    <div class="quiz-question">Someone says: "I'm not sure I entirely agree with that." What are they expressing?</div>
                    <div class="quiz-options">
                        <div class="quiz-option">I completely disagree with you</div>
                        <div class="quiz-option">I need more time to think</div>
                        <div class="quiz-option">I partially agree with you</div>
                        <div class="quiz-option">I'm confused about the topic</div>
                    </div>
                </div>

                <div class="quiz-container" data-correct-answer="This is urgent and important">
                    <div class="quiz-question">In a work context, "When you have a moment" usually means:</div>
                    <div class="quiz-options">
                        <div class="quiz-option">This is urgent and important</div>
                        <div class="quiz-option">This can wait until next week</div>
                        <div class="quiz-option">This is completely optional</div>
                        <div class="quiz-option">This is just a casual suggestion</div>
                    </div>
                </div>
            </div>

            <div class="section challenge">
                <h2 class="section-title">
                    <span class="emoji">üèÜ</span>Final Challenge: English Trivia Speed Round
                    <span class="level-badge">MASTER LEVEL</span>
                </h2>
                
                <div class="quiz-container">
                    <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">Answer 5 questions about England as quickly as possible!</p>
                    <div class="speed-timer" style="font-size: 2.5em; text-align: center; color: #e74c3c; margin: 20px 0;" id="finalTimer">30</div>
                    <div id="finalQuestion" style="font-size: 1.3em; margin: 20px 0; text-align: center;">Press Start to begin the final challenge!</div>
                    <div id="finalOptions" style="text-align: center;">
                        <button class="btn" onclick="startFinalChallenge()">üöÄ Start Final Challenge</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="dictionaryPopup" class="dictionary-popup">
        <h4 id="dictWord"></h4>
        <p id="dictDefinition"></p>
        <button class="close-popup" onclick="closeDictionary()">Close</button>
    </div>
    
    <script>
        let score = 0;
        let level = 1;
        let streak = 0;
        let achievements = 0;
        
        const encouragingMessages = [
            'Brilliant! Absolutely brilliant! üåü',
            'Spot on! Well done! üëè',
            'Excellent work! üéâ',
            'Perfect! You\'re getting the hang of this! ‚ú®',
            'Outstanding! Keep it up! üöÄ'
        ];
        
        const funnyIncorrectMessages = [
            'Not quite, old chap! Give it another go! ü§î',
            'Oops! That\'s not quite right! üòÖ',
            'Close, but not quite there! Try again! üéØ',
            'Blimey! That\'s not the one! üòÑ',
            'Almost there! One more try! üí™'
        ];
        
        function updateStats(points, resetStreak = false) {
            score += points;
            if (resetStreak) {
                streak = 0;
            } else {
                streak++;
            }
            if (score >= 150 * level) {
                level++;
                score = 0;
                showAchievement(`Brilliant! Level ${level} achieved! üéä`);
            }
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('streak').textContent = streak;
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = (score / (150 * level)) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function showAchievement(message) {
            const achievementBox = document.createElement('div');
            achievementBox.className = 'achievement';
            achievementBox.textContent = message;
            document.body.appendChild(achievementBox);
            achievements++;
            document.getElementById('achievements').textContent = achievements;
            setTimeout(() => {
                achievementBox.remove();
            }, 4000);
        }

        function showFeedback(element, isCorrect, message) {
            const feedbackBox = document.createElement('div');
            feedbackBox.className = `feedback-box ${isCorrect ? 'excellent' : 'needs-improvement'}`;
            const randomMessage = isCorrect ? 
                encouragingMessages[Math.floor(Math.random() * encouragingMessages.length)] :
                funnyIncorrectMessages[Math.floor(Math.random() * funnyIncorrectMessages.length)];
            feedbackBox.innerHTML = `${randomMessage} ${message}`;
            element.parentNode.insertBefore(feedbackBox, element.nextSibling);
            setTimeout(() => {
                feedbackBox.remove();
            }, 5000);
        }

        // Dictionary
        function setupDictionary() {
            document.querySelectorAll('.difficult-word').forEach(word => {
                word.addEventListener('click', (e) => {
                    const popup = document.getElementById('dictionaryPopup');
                    document.getElementById('dictWord').textContent = e.target.textContent;
                    document.getElementById('dictDefinition').textContent = e.target.dataset.definition;
                    popup.style.display = 'block';
                    updateStats(5);
                });
            });
        }
        
        function closeDictionary() {
            document.getElementById('dictionaryPopup').style.display = 'none';
        }

        // Quiz Setup
        function setupQuizzes(selector, points) {
            const quizzes = document.querySelectorAll(selector);
            quizzes.forEach(quiz => {
                const correctAnswer = quiz.dataset.correctAnswer;
                let hasAnsweredCorrectly = false;
                
                quiz.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        if (hasAnsweredCorrectly) return;
                        
                        const selectedOption = e.target;
                        const isCorrect = selectedOption.textContent === correctAnswer;
                        
                        quiz.querySelectorAll('.quiz-option').forEach(opt => {
                            opt.classList.remove('correct', 'incorrect');
                        });
                        
                        if (isCorrect) {
                            selectedOption.classList.add('correct');
                            hasAnsweredCorrectly = true;
                            updateStats(points);
                            showFeedback(quiz, true, 'Correct answer!');
                            quiz.querySelectorAll('.quiz-option').forEach(opt => opt.style.pointerEvents = 'none');
                        } else {
                            selectedOption.classList.add('incorrect');
                            updateStats(0, true);
                            showFeedback(quiz, false, 'Try again!');
                        }
                    });
                });
            });
        }

        // Pronunciation Match Game
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function setupPronunciationMatch() {
            const matches = [
                { spelling: 'Greenwich', pronunciation: 'Grenitch' },
                { spelling: 'Leicester', pronunciation: 'Lesta' },
                { spelling: 'Worcestershire', pronunciation: 'Wustasheer' },
                { spelling: 'Edinburgh', pronunciation: 'Edinbra' },
                { spelling: 'Loughborough', pronunciation: 'Luffbera' },
                { spelling: 'Cirencester', pronunciation: 'Siren-sester' },
            ];

            const spellingColumn = document.getElementById('spelling-column');
            const pronunciationColumn = document.getElementById('pronunciation-column');
            
            const shuffledSpellings = shuffleArray([...matches]);
            const shuffledPronunciations = shuffleArray([...matches]);

            spellingColumn.innerHTML = '';
            pronunciationColumn.innerHTML = '';

            shuffledSpellings.forEach(item => {
                const div = document.createElement('div');
                div.className = 'match-item';
                div.textContent = item.spelling;
                div.dataset.match = item.spelling;
                spellingColumn.appendChild(div);
            });

            shuffledPronunciations.forEach(item => {
                const div = document.createElement('div');
                div.className = 'match-item';
                div.textContent = item.pronunciation;
                div.dataset.match = item.spelling;
                pronunciationColumn.appendChild(div);
            });

            let firstSelection = null;

            document.querySelectorAll('.match-item').forEach(item => {
                item.addEventListener('click', () => {
                    if (item.classList.contains('correct') || item.classList.contains('incorrect')) {
                        return;
                    }

                    if (!firstSelection) {
                        firstSelection = item;
                        item.classList.add('selected');
                    } else {
                        const secondSelection = item;
                        firstSelection.classList.remove('selected');
                        
                        if (firstSelection.dataset.match === secondSelection.dataset.match) {
                            firstSelection.classList.add('correct');
                            secondSelection.classList.add('correct');
                            updateStats(20);
                            showFeedback(document.querySelector('.pronunciation'), true, 'That\'s a perfect match!');
                            
                            // Check if all pairs are matched
                            const unmatchedItems = document.querySelectorAll('.match-item:not(.correct)');
                            if (unmatchedItems.length === 0) {
                                showAchievement('Master of English Pronunciation! üó£Ô∏è');
                            }
                        } else {
                            firstSelection.classList.add('incorrect');
                            secondSelection.classList.add('incorrect');
                            updateStats(0, true);
                            showFeedback(document.querySelector('.pronunciation'), false, 'Not a match. Try again!');
                            setTimeout(() => {
                                firstSelection.classList.remove('incorrect');
                                secondSelection.classList.remove('incorrect');
                            }, 1000);
                        }
                        firstSelection = null;
                    }
                });
            });
        }


        // Drag and Drop
        let draggedElement = null;
        
        function setupDragDrop() {
            document.querySelectorAll('.draggable-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedElement = e.target;
                });
            });
            
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    if (draggedElement) {
                        zone.appendChild(draggedElement);
                        draggedElement = null;
                    }
                });
            });
        }
        
        function checkDragDrop() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let correctPlacements = 0;
            let totalItems = 0;
            
            dropZones.forEach(zone => {
                const items = zone.querySelectorAll('.draggable-item');
                const regionName = zone.dataset.region;
                
                items.forEach(item => {
                    totalItems++;
                    if (item.dataset.region === regionName) {
                        correctPlacements++;
                        item.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
                    } else {
                        item.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
                    }
                });
            });
            
            if (correctPlacements === totalItems && totalItems > 0) {
                updateStats(50);
                showAchievement('Geography Master! All landmarks correctly placed! üó∫Ô∏è');
                showFeedback(document.querySelector('.drag-drop'), true, 'Perfect placement!');
            } else {
                showFeedback(document.querySelector('.drag-drop'), false, `You got ${correctPlacements} out of ${totalItems} correct!`);
            }
        }

        

        // Final Challenge
        const finalQuestions = [
            {q: "What river runs through London?", options: ["Severn", "Thames"], answer: "Thames"},
            {q: "Which royal palace is in London?", options: ["Buckingham Palace", "Windsor Castle"], answer: "Buckingham Palace"},
            {q: "England's national flower?", options: ["Rose", "Daffodil"], answer: "Rose"},
            {q: "Famous English playwright?", options: ["Shaw", "Shakespeare"], answer: "Shakespeare"},
            {q: "Traditional English breakfast drink?", options: ["Coffee", "Tea"], answer: "Tea"}
        ];
        
        let currentFinalQ = 0;
        let finalTimer = 30;
        let finalInterval;
        
        function startFinalChallenge() {
            document.getElementById('finalOptions').innerHTML = '';
            currentFinalQ = 0;
            finalTimer = 30;
            loadFinalQuestion();
            finalInterval = setInterval(() => {
                finalTimer--;
                document.getElementById('finalTimer').textContent = finalTimer;
                if (finalTimer <= 0) {
                    endFinalChallenge();
                }
            }, 1000);
        }
        
        function loadFinalQuestion() {
            if (currentFinalQ >= finalQuestions.length) {
                endFinalChallenge();
                return;
            }
            
            const q = finalQuestions[currentFinalQ];
            document.getElementById('finalQuestion').textContent = `${currentFinalQ + 1}/5: ${q.q}`;
            document.getElementById('finalOptions').innerHTML = '';
            
            q.options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'btn';
                btn.textContent = option;
                btn.onclick = () => checkFinalAnswer(option, q.answer);
                document.getElementById('finalOptions').appendChild(btn);
            });
        }
        
        function checkFinalAnswer(selected, correct) {
            if (selected === correct) {
                updateStats(20);
                currentFinalQ++;
                loadFinalQuestion();
            } else {
                showFeedback(document.querySelector('.challenge'), false, 'Wrong answer! Challenge ended.');
                endFinalChallenge();
            }
        }
        
        function endFinalChallenge() {
            clearInterval(finalInterval);
            if (currentFinalQ >= finalQuestions.length) {
                showAchievement('üèÜ CHAMPION! Perfect final challenge! üéä');
                document.getElementById('finalQuestion').textContent = 'Congratulations! Perfect score!';
                updateStats(100);
            } else {
                document.getElementById('finalQuestion').textContent = `Challenge complete! You answered ${currentFinalQ} out of 5 correctly.`;
            }
            document.getElementById('finalOptions').innerHTML = '<button class="btn" onclick="startFinalChallenge()">Try Again</button>';
        }
        
        // Initialize everything
        window.onload = function() {
            setupDictionary();
            setupPronunciationMatch();
            setupQuizzes('.quiz-container', 30);
            setupDragDrop();
        };
    </script>
</body>
</html>
