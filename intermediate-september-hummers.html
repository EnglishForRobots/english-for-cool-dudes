<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mysterious Sounds Around the World - English Lesson</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: #718096;
            font-size: 1.2em;
            font-weight: 300;
        }

        .activity {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .activity:hover {
            transform: translateY(-5px);
        }

        .activity h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .vocab-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .vocab-item {
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .vocab-item:hover {
            background: #e2e8f0;
            transform: translateX(5px);
        }

        .vocab-item.selected {
            background: #bee3f8;
            border-color: #3182ce;
        }

        .vocab-item.correct {
            background: #c6f6d5;
            border-color: #38a169;
        }

        .vocab-item.incorrect {
            background: #fed7d7;
            border-color: #e53e3e;
        }

        .word {
            font-weight: bold;
            color: #2d3748;
        }

        .definition {
            color: #4a5568;
            font-size: 0.9em;
        }

        .reading-text {
            background: #f7fafc;
            padding: 25px;
            border-radius: 10px;
            line-height: 1.8;
            font-size: 1.1em;
            color: #2d3748;
            border-left: 5px solid #667eea;
        }

        .clickable-word {
            color: #3182ce;
            cursor: pointer;
            text-decoration: underline;
            transition: all 0.2s ease;
        }

        .clickable-word:hover {
            background: #bee3f8;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .definition-popup {
            position: fixed;
            background: #2d3748;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            z-index: 1000;
            max-width: 250px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        .question {
            background: #edf2f7;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .question h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 15px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }

        .option.selected {
            background: #bee3f8;
            border-color: #3182ce;
        }

        .option.correct {
            background: #c6f6d5;
            border-color: #38a169;
        }

        .option.incorrect {
            background: #fed7d7;
            border-color: #e53e3e;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .score {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3748;
            margin: 20px 0;
            padding: 15px;
            background: #e6fffa;
            border-radius: 10px;
            border: 2px solid #38b2ac;
        }

        .gap-fill input {
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 1em;
            margin: 0 5px;
            transition: border-color 0.3s ease;
        }

        .gap-fill input:focus {
            outline: none;
            border-color: #3182ce;
        }

        .gap-fill input.correct {
            border-color: #38a169;
            background: #c6f6d5;
        }

        .gap-fill input.incorrect {
            border-color: #e53e3e;
            background: #fed7d7;
        }

        .grammar-exercise {
            background: #f0fff4;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #38a169;
        }

        .discussion-area {
            background: #fffaf0;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #ed8936;
        }

        .discussion-area textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
        }

        .discussion-area textarea:focus {
            outline: none;
            border-color: #ed8936;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .feedback.success {
            background: #c6f6d5;
            color: #2f855a;
            border: 2px solid #38a169;
        }

        .feedback.error {
            background: #fed7d7;
            color: #c53030;
            border: 2px solid #e53e3e;
        }

        .link-section {
            background: #e6fffa;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 2px solid #38b2ac;
        }

        .link-section a {
            color: #285e61;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

        .link-section a:hover {
            color: #234e52;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .subtitle {
                font-size: 1em;
            }

            .vocab-grid {
                grid-template-columns: 1fr;
            }

            .vocab-list {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .vocab-item {
                flex: 1 1 45%;
                text-align: center;
            }

            .definition {
                font-size: 0.8em;
            }

            .activity {
                padding: 20px;
                margin-bottom: 20px;
            }

            .activity h2 {
                font-size: 1.5em;
            }

            .reading-text {
                padding: 15px;
                font-size: 1em;
            }

            .options {
                gap: 8px;
            }

            .option {
                padding: 10px 12px;
                font-size: 0.9em;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9em;
                margin: 8px 3px;
            }

            .word-bank-item {
                padding: 8px 12px;
                font-size: 0.9em;
                min-width: 70px;
            }

            .gap-word {
                min-width: 80px;
                padding: 5px 10px;
            }

            .discussion-area textarea {
                min-height: 100px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.6em;
                line-height: 1.2;
            }

            .activity {
                padding: 15px;
            }

            .vocab-grid {
                gap: 8px;
            }

            .word-bank-item {
                font-size: 0.8em;
                padding: 6px 10px;
            }

            .reading-text {
                padding: 12px;
                font-size: 0.9em;
            }

            .btn {
                width: 100%;
                margin: 5px 0;
            }

            .definition-popup {
                max-width: 200px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîä Mysterious Sounds Around the World</h1>
            <p class="subtitle">An Interactive English Lesson - Intermediate Level (B2)</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
            <div class="score" id="totalScore">Total Score: 0/100</div>
        </div>

        <div class="activity" id="activity1">
            <h2>üéØ Activity 1: Vocabulary Matching</h2>
            <p>Match the words with their definitions by clicking on them:</p>
            <div class="vocab-grid">
                <div class="vocab-list" id="wordList">
                    <div class="vocab-item" data-word="phenomenon">
                        <div class="word">phenomenon</div>
                    </div>
                    <div class="vocab-item" data-word="appliance">
                        <div class="word">appliance</div>
                    </div>
                    <div class="vocab-item" data-word="frequency">
                        <div class="word">frequency</div>
                    </div>
                    <div class="vocab-item" data-word="perception">
                        <div class="word">perception</div>
                    </div>
                    <div class="vocab-item" data-word="meteor">
                        <div class="word">meteor</div>
                    </div>
                </div>

                <div class="vocab-list" id="definitionList">
                    <div class="vocab-item" data-word="appliance">
                        <div class="definition">A household device or machine, especially an electrical one</div>
                    </div>
                    <div class="vocab-item" data-word="meteor">
                        <div class="definition">A piece of rock from space that burns up in Earth's atmosphere</div>
                    </div>
                    <div class="vocab-item" data-word="perception">
                        <div class="definition">The way you notice or understand something using your senses</div>
                    </div>
                    <div class="vocab-item" data-word="frequency">
                        <div class="definition">The rate at which sound waves vibrate</div>
                    </div>
                    <div class="vocab-item" data-word="phenomenon">
                        <div class="definition">An observable event or fact, especially one that is unusual</div>
                    </div>
                </div>
            </div>
            <button class="btn" onclick="checkVocabulary()">Check Answers</button>
            <button class="btn" onclick="resetVocabulary()" style="background: #718096;">Reset</button>
            <div id="vocabFeedback"></div>
        </div>

        <div class="activity" id="activity2">
            <h2>üìñ Activity 2: Reading Comprehension</h2>
            <p>Read the text below:</p>
            <div class="reading-text">
                Around the world, people are reporting mysterious sounds. In Sweden, witnesses describe hearing trumpet-like noises. In Michigan, similar sounds have been recorded. Dr. Glen MacPherson in British Columbia discovered a humming sound in his home. Initially, he thought it was a household appliance, but even after cutting power to his entire house, the sound became louder.

                This has become a worldwide phenomenon that MacPherson calls "the worldwide hum." His research project has attracted over 17,000 people who call themselves "Hummers" - civilians and scientists who report hearing the same mysterious sound.

                Some experts believe the sounds could be caused by low-frequency sound waves. However, even when MacPherson built a special steel box to block these waves, he could still hear the hum inside it. Other possible explanations for loud booms include sonic booms from fighter jets or meteors entering Earth's atmosphere.
            </div>
        </div>

        <div class="activity" id="activity3">
            <h2>‚ùì Activity 3: Multiple Choice Comprehension</h2>

            <div class="question">
                <h3>1. What happened when Dr. MacPherson cut the power to his house?</h3>
                <div class="options">
                    <div class="option" data-answer="a">a) The humming sound stopped completely</div>
                    <div class="option" data-answer="b" data-correct="true">b) The humming sound got louder</div>
                    <div class="option" data-answer="c">c) The sound stayed exactly the same</div>
                    <div class="option" data-answer="d">d) He discovered it was his refrigerator</div>
                </div>
            </div>

            <div class="question">
                <h3>2. How many people have contacted Dr. MacPherson about hearing similar sounds?</h3>
                <div class="options">
                    <div class="option" data-answer="a">a) About 7,000</div>
                    <div class="option" data-answer="b" data-correct="true">b) Around 17,000</div>
                    <div class="option" data-answer="c">c) Over 70,000</div>
                    <div class="option" data-answer="d">d) Less than 1,000</div>
                </div>
            </div>

            <div class="question">
                <h3>3. What did the steel box experiment prove?</h3>
                <div class="options">
                    <div class="option" data-answer="a">a) The sound comes from extraterrestrial sources</div>
                    <div class="option" data-answer="b">b) Low-frequency sound waves cause the hum</div>
                    <div class="option" data-answer="c" data-correct="true">c) The hum is not caused by low-frequency sound waves</div>
                    <div class="option" data-answer="d">d) The worldwide hum is 100% real</div>
                </div>
            </div>

            <button class="btn" onclick="checkMultipleChoice()">Check Answers</button>
            <div id="mcFeedback"></div>
        </div>

        <div class="activity" id="activity4">
            <h2>üé• Activity 4: Watch the Video</h2>
            <p>Watch this video about the mysterious sounds phenomenon:</p>
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/vul4SYL4QiQ" frameborder="0" allowfullscreen></iframe>
            </div>
            <p style="margin-top: 15px; color: #4a5568;">After watching, continue to the next activity!</p>
        </div>

        <div class="activity" id="activity5">
            <h2>‚úÖ Activity 5: True or False</h2>
            <p>Based on what you've read and watched, decide if these statements are true or false:</p>

            <div class="question">
                <h3>1. The mysterious sounds have only been reported in North America.</h3>
                <div class="options">
                    <div class="option" data-tf="false" data-correct="true">False</div>
                    <div class="option" data-tf="true">True</div>
                </div>
            </div>

            <div class="question">
                <h3>2. Dr. MacPherson's steel box successfully blocked the humming sound.</h3>
                <div class="options">
                    <div class="option" data-tf="false" data-correct="true">False</div>
                    <div class="option" data-tf="true">True</div>
                </div>
            </div>

            <div class="question">
                <h3>3. Some of the loud booms might be explained by meteors or sonic booms.</h3>
                <div class="options">
                    <div class="option" data-tf="false">False</div>
                    <div class="option" data-tf="true" data-correct="true">True</div>
                </div>
            </div>

            <div class="question">
                <h3>4. People who hear the mysterious sounds call themselves "Hummers."</h3>
                <div class="options">
                    <div class="option" data-tf="false">False</div>
                    <div class="option" data-tf="true" data-correct="true">True</div>
                </div>
            </div>

            <button class="btn" onclick="checkTrueFalse()">Check Answers</button>
            <div id="tfFeedback"></div>
        </div>

        <div class="activity gap-fill" id="activity6">
            <h2>üìù Activity 6: Fill in the Gaps</h2>
            <p>Complete the sentences with the missing words:</p>

            <div style="background: #f7fafc; padding: 20px; border-radius: 10px; line-height: 2;">
                <p><strong>1.</strong> The mysterious sounds are being heard as a <input type="text" data-answer="worldwide" placeholder="..."> phenomenon.</p>

                <p><strong>2.</strong> Dr. MacPherson thought the sound was coming from a household <input type="text" data-answer="appliance" placeholder="..."> at first.</p>

                <p><strong>3.</strong> Over 17,000 people who call themselves "<input type="text" data-answer="hummers" placeholder="...">" have contacted the researcher.</p>

                <p><strong>4.</strong> The sounds might be caused by low-<input type="text" data-answer="frequency" placeholder="..."> sound waves.</p>

                <p><strong>5.</strong> Some loud booms could be explained by <input type="text" data-answer="meteors" placeholder="..."> entering Earth's atmosphere.</p>
            </div>

            <button class="btn" onclick="checkGapFill()">Check Answers</button>
            <button class="btn" onclick="showGapFillHints()" style="background: #ed8936;">Show Hints</button>
            <div id="gapFillFeedback"></div>
        </div>

        <div class="activity grammar-exercise" id="activity7">
            <h2>üìö Activity 7: Grammar Focus - Second Conditional</h2>
            <p><strong>The Second Conditional</strong> is perfect for discussing hypothetical situations like these mysterious phenomena!</p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                <strong>Structure:</strong> If + past simple, would + base verb<br>
                <strong>Example:</strong> "If I heard mysterious sounds, I would investigate them."
            </div>

            <p>Complete these second conditional sentences about the mysterious sounds:</p>

            <div class="question">
                <h3>1. If scientists _______ the source of these sounds, they would publish their findings.</h3>
                <div class="options">
                    <div class="option" data-grammar="know">know</div>
                    <div class="option" data-grammar="knew" data-correct="true">knew</div>
                    <div class="option" data-grammar="would know">would know</div>
                </div>
            </div>

            <div class="question">
                <h3>2. If you _______ these mysterious sounds in your house, what would you do?</h3>
                <div class="options">
                    <div class="option" data-grammar="would hear">would hear</div>
                    <div class="option" data-grammar="heard" data-correct="true">heard</div>
                    <div class="option" data-grammar="hear">hear</div>
                </div>
            </div>

            <div class="question">
                <h3>3. Dr. McPherson said he _______ investigate further if more people reported the phenomenon.</h3>
                <div class="options">
                    <div class="option" data-grammar="will">will</div>
                    <div class="option" data-grammar="would" data-correct="true">would</div>
                    <div class="option" data-grammar="might be">might be</div>
                </div>
            </div>

            <button class="btn" onclick="checkGrammar()">Check Grammar</button>
            <div id="grammarFeedback"></div>
        </div>

        <div class="activity discussion-area" id="activity8">
            <h2>üí≠ Activity 8: Discussion</h2>
            <p><strong>Discussion Task:</strong></p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #ed8936;">
                <strong>"If you heard mysterious sounds like the ones described in the article, what would you do? How would you investigate them, and who would you contact for help?"</strong>
            </div>

            <textarea id="writingResponse" placeholder="You can write notes first here... Remember to use the second conditional (If I heard..., I would...)"></textarea>

            <div style="margin: 15px 0;">
                <strong>Checklist for your writing:</strong>
                <ul style="margin-left: 20px; color: #4a5568;">
                    <li>‚úì Use second conditional sentences</li>
                    <li>‚úì Include vocabulary from the lesson</li>
                    
     
                </ul>
            </div>

         
          
        </div>

        <div class="activity link-section" id="activity9">
            <h2>üîó Activity 9: Explore Further</h2>
            <p>Want to learn more about mysterious sounds and unexplained phenomena?</p>
            <p style="margin: 15px 0;">
                <a href="https://www.youtube.com/watch?v=QpeKot2X_O8" target="_blank">
                    üé¨ Watch: "More Mysterious Sounds Explained" ‚Üí
                </a>
            </p>
            <p style="color: #4a5568; font-size: 0.9em;">
                This video explores more examples of unexplained sounds around the world and scientific theories about their origins.
            </p>

            <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 10px;">
                <strong>üèÜ Congratulations on completing the lesson!</strong><br>
                You've practiced vocabulary, reading, listening, grammar, speaking and writing skills at the intermediate level.
            </div>
        </div>
    </div>

    <script>
        let totalScore = 0;
        let activitiesCompleted = 0;
        const totalActivities = 8;

        // Vocabulary matching functionality
        let selectedWord = null;
        let selectedDefinition = null;
        let vocabMatches = {};

        function selectVocabItem(element) {
            if (element.closest('#wordList')) {
                // It's a word
                if (selectedWord) selectedWord.classList.remove('selected');
                selectedWord = element;
                element.classList.add('selected');
            } else {
                // It's a definition
                if (selectedDefinition) selectedDefinition.classList.remove('selected');
                selectedDefinition = element;
                element.classList.add('selected');
            }

            if (selectedWord && selectedDefinition) {
                const wordValue = selectedWord.dataset.word;
                const definitionValue = selectedDefinition.dataset.word;

                if (wordValue === definitionValue) {
                    selectedWord.classList.add('correct');
                    selectedDefinition.classList.add('correct');
                    vocabMatches[wordValue] = true;
                } else {
                    selectedWord.classList.add('incorrect');
                    selectedDefinition.classList.add('incorrect');
                }

                setTimeout(() => {
                    selectedWord.classList.remove('selected', 'incorrect');
                    selectedDefinition.classList.remove('selected', 'incorrect');
                    selectedWord = null;
                    selectedDefinition = null;
                }, 500);
            }
        }

        // Add click events to vocabulary items
        document.querySelectorAll('#wordList .vocab-item').forEach(item => {
            item.addEventListener('click', () => selectVocabItem(item));
        });

        document.querySelectorAll('#definitionList .vocab-item').forEach(item => {
            item.addEventListener('click', () => selectVocabItem(item));
        });

        function checkVocabulary() {
            const correctPairs = ['phenomenon', 'appliance', 'frequency', 'perception', 'meteor'];
            let correct = 0;

            correctPairs.forEach(word => {
                if (vocabMatches[word]) {
                    correct++;
                }
            });

            const score = Math.round((correct / correctPairs.length) * 20);
            updateScore(score);

            document.getElementById('vocabFeedback').innerHTML = `
                <div class="feedback ${correct === correctPairs.length ? 'success' : 'error'}">
                    You got ${correct} out of ${correctPairs.length} correct! Score: ${score}/20
                </div>
            `;
        }

        function resetVocabulary() {
            document.querySelectorAll('.vocab-item').forEach(item => {
                item.classList.remove('selected', 'correct', 'incorrect');
            });
            vocabMatches = {};
            selectedWord = null;
            selectedDefinition = null;
            document.getElementById('vocabFeedback').innerHTML = '';
        }

        // Multiple choice functionality
        document.querySelectorAll('#activity3 .option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                question.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function checkMultipleChoice() {
            const questions = document.querySelectorAll('#activity3 .question');
            let correct = 0;

            questions.forEach(question => {
                const selected = question.querySelector('.option.selected');
                const correctOption = question.querySelector('.option[data-correct="true"]');

                if (selected) {
                    if (selected.dataset.correct === 'true') {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        correctOption.classList.add('correct');
                    }
                } else {
                    correctOption.classList.add('correct');
                }
            });

            const score = Math.round((correct / 3) * 15);
            updateScore(score);

            document.getElementById('mcFeedback').innerHTML = `
                <div class="feedback ${correct === 3 ? 'success' : 'error'}">
                    You got ${correct} out of 3 correct! Score: ${score}/15
                </div>
            `;
        }

        // True/False functionality
        document.querySelectorAll('#activity5 .option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                question.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function checkTrueFalse() {
            const questions = document.querySelectorAll('#activity5 .question');
            let correct = 0;

            questions.forEach(question => {
                const selected = question.querySelector('.option.selected');
                const correctOption = question.querySelector('.option[data-correct="true"]');

                if (selected) {
                    if (selected.dataset.correct === 'true') {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        correctOption.classList.add('correct');
                    }
                } else {
                    correctOption.classList.add('correct');
                }
            });

            const score = Math.round((correct / 4) * 15);
            updateScore(score);

            document.getElementById('tfFeedback').innerHTML = `
                <div class="feedback ${correct === 4 ? 'success' : 'error'}">
                    You got ${correct} out of 4 correct! Score: ${score}/15
                </div>
            `;
        }

        // Gap fill functionality
        function checkGapFill() {
            const inputs = document.querySelectorAll('#activity6 input');
            let correct = 0;

            inputs.forEach(input => {
                const userAnswer = input.value.toLowerCase().trim();
                const correctAnswer = input.dataset.answer.toLowerCase();

                if (userAnswer === correctAnswer) {
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                    correct++;
                } else {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                }
            });

            const score = Math.round((correct / 5) * 15);
            updateScore(score);

            document.getElementById('gapFillFeedback').innerHTML = `
                <div class="feedback ${correct === 5 ? 'success' : 'error'}">
                    You got ${correct} out of 5 correct! Score: ${score}/15
                    ${correct < 5 ? '<br><strong>Correct answers:</strong> worldwide, appliance, hummers, frequency, meteors' : ''}
                </div>
            `;
        }

        function showGapFillHints() {
            const hints = [
                "This describes something that happens everywhere on Earth",
                "An electrical device you use in your home",
                "What the people who hear the sounds call themselves",
                "How often sound waves vibrate",
                "Space rocks that burn up in our atmosphere"
            ];

            document.getElementById('gapFillFeedback').innerHTML = `
                <div class="feedback" style="background: #fef5e7; color: #744210; border-color: #ed8936;">
                    <strong>Hints:</strong><br>
                    1. ${hints[0]}<br>
                    2. ${hints[1]}<br>
                    3. ${hints[2]}<br>
                    4. ${hints[3]}<br>
                    5. ${hints[4]}
                </div>
            `;
        }

        // Grammar functionality
        document.querySelectorAll('#activity7 .option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                question.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function checkGrammar() {
            const questions = document.querySelectorAll('#activity7 .question');
            let correct = 0;

            questions.forEach(question => {
                const selected = question.querySelector('.option.selected');
                const correctOption = question.querySelector('.option[data-correct="true"]');

                if (selected) {
                    if (selected.dataset.correct === 'true') {
                        selected.classList.add('correct');
                        correct++;
                    } else {
                        selected.classList.add('incorrect');
                        correctOption.classList.add('correct');
                    }
                } else {
                    correctOption.classList.add('correct');
                }
            });

            const score = Math.round((correct / 3) * 10);
            updateScore(score);

            document.getElementById('grammarFeedback').innerHTML = `
                <div class="feedback ${correct === 3 ? 'success' : 'error'}">
                    You got ${correct} out of 3 correct! Score: ${score}/10
                    ${correct < 3 ? '<br><strong>Remember:</strong> Second conditional uses "If + past simple, would + base verb"' : ''}
                </div>
            `;
        }

        // Share with teacher functionality
        function shareWithTeacher() {
            const writingText = document.getElementById('writingResponse').value;
            const subject = encodeURIComponent("Hummers Lesson Writing Submission");
            const body = encodeURIComponent(writingText);
            const mailtoLink = `mailto:a.aldridge@boehret-sehmsdorf.de?subject=${subject}&body=${body}`;
            window.location.href = mailtoLink;
        }

        // Score and progress tracking
        function updateScore(points) {
            totalScore += points;
            activitiesCompleted++;

            document.getElementById('totalScore').textContent = `Total Score: ${totalScore}/100`;

            const progressPercent = (activitiesCompleted / totalActivities) * 100;
            document.getElementById('progress').style.width = progressPercent + '%';
        }

        // Initialize progress
        document.getElementById('progress').style.width = '0%';
    </script>
</body>
</html>
