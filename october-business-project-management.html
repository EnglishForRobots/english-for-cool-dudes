<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business English: Project Management Fundamentals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Consistent Dark Theme Variables */
        body {
            font-family: 'Inter', sans-serif;
            background: #1a202c; /* Dark background */
        }
        .container-main {
            background-color: #2d3748; /* Darker main container */
        }
        .lesson-section {
            background-color: #4a5568; /* Even darker section background */
        }
        .game-title {
            color: #ffffff; /* Plain white text for clear display */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .section-title {
            color: #f59e0b; /* Amber/Gold for section headers */
        }
        .progress-bar-fill {
            background-color: #ef4444; /* Red for progress (warning color) */
            transition: width 0.5s ease;
        }
        /* Custom styles for interactive elements to match the theme */
        .word-bank-item, .conversation-option {
            cursor: pointer;
            padding: 8px 12px;
            margin: 4px;
            border-radius: 6px;
            background-color: #4a5568;
            color: #fff;
            border: 1px solid #6b7280;
            transition: all 0.2s;
        }
        .word-bank-item:hover, .conversation-option:hover {
            background-color: #f59e0b; /* Amber hover */
            color: #1a202c;
        }
        .selected {
            background-color: #ef4444; /* Red selected (Warning/Active) */
            border-color: #f59e0b;
        }
        
        /* NEW: Flashing Animation for Incorrect Matches */
        @keyframes incorrect-flash {
            0% { background-color: #ef4444; border-color: #fca5a5; } /* Red */
            50% { background-color: #fca5a5; border-color: #ef4444; } /* Light Red */
            100% { background-color: #ef4444; border-color: #fca5a5; } /* Red */
        }

        .incorrect-flash {
            animation: incorrect-flash 0.5s 2; /* Flash twice over 1 second */
            color: #fff;
        }

        /* Base style for a correct match (color handled dynamically by JS) */
        .matched-correct {
            color: #fff; 
            border: 1px solid #fff;
            pointer-events: none; /* Disable clicking once matched */
            cursor: default;
        }

        /* Custom Tailwind Classes for Cycling Colors */
        .bg-green-600 { background-color: #16a34a; }
        .bg-indigo-600 { background-color: #4f46e5; }
        .bg-teal-600 { background-color: #0d9488; }
        .bg-purple-600 { background-color: #9333ea; }


        /* Consistent Green for correct answers in Exercise B */
        .correct-answer {
            background-color: #10b981; 
            color: #fff;
        }
        .incorrect-answer {
            background-color: #ef4444; 
            color: #fff;
        }
        .gap {
            display: inline-block;
            min-width: 120px;
            height: 28px;
            padding: 0 4px;
            border-bottom: 2px dashed #9ca3af;
            text-align: center;
            line-height: 28px;
            color: #f59e0b; 
            font-weight: 600;
        }
    </style>
</head>
<body class="p-4">

    <div class="container-main mx-auto my-8 p-6 lg:p-10 rounded-xl shadow-2xl max-w-6xl text-gray-200">

        <header class="text-center pb-8 border-b border-gray-600">
            <p class="text-lg font-medium text-gray-400 mb-2">Essential Business English for Project Teams</p>
            <h1 class="text-6xl font-extrabold game-title mb-2">⚙️ Project Management: The Triple Constraint</h1>
            <p class="text-xl text-gray-400">Mastering the vocabulary for managing Scope, Time, and Cost.</p>

            <div class="mt-6 flex justify-between text-sm font-semibold">
                <span id="progress-text">Progress: 0% Complete</span>
                <span id="score-display">Score: 0</span>
            </div>
            <div class="w-full bg-gray-600 rounded-full h-4 mt-2">
                <div id="progress-bar" class="progress-bar-fill h-4 rounded-full" style="width: 0%"></div>
            </div>
        </header>

        <section class="mt-8">
            <h2 class="text-2xl font-bold section-title mb-4">Reading: The Iron Triangle and Quality</h2>
            <div class="lesson-section p-6 rounded-lg">
                <p class="mb-4">The core concept in traditional project management is the **Triple Constraint**, often visualized as a triangle. This model asserts that any project must balance three interdependent variables: **Scope**, **Time**, and **Cost**. These are also known as the three **constraints**.</p>
                <p class="mb-4">The **Scope** defines what the project aims to achieve—the specific deliverables, features, and functions. **Time** refers to the project schedule, including the **Critical Path** and the final deadline. **Cost** is the budget, including resources and labor, which often determines the project's **Baseline**—the approved plan against which progress is measured.</p>
                <p class="mb-4">Any change to one side of the triangle *must* result in a change to at least one other side. For example, if the client demands an increase in Scope (*Scope Creep*), you must either increase the Cost (hire more people) or increase the Time (extend the deadline). The central point, **Quality**, is affected by all three. Cutting corners on Time or Cost to maintain the Scope often leads to a drop in Quality and failure to meet the final **Deliverable**.</p>
                <p class="text-sm font-semibold text-gray-400 mt-6 border-t border-gray-600 pt-4">Key to successful project delivery is continuous risk assessment and transparent communication with all **stakeholders**.</p>
            </div>
        </section>

        <section class="mt-8">
            <h2 class="text-2xl font-bold section-title mb-4">Exercise A: Project Management Terminology</h2>
            <p class="mb-4 text-gray-300">Match the key project management term to its correct definition. (Watch for the correct match color changes!)</p>
            <div id="vocab-matching" class="lesson-section p-6 rounded-lg grid grid-cols-2 gap-6">
                <div id="terms-list" class="space-y-4">
                    <div class="word-bank-item" data-term="Deliverable">Deliverable</div>
                    <div class="word-bank-item" data-term="Scope Creep">Scope Creep</div>
                    <div class="word-bank-item" data-term="Critical Path">Critical Path</div>
                    <div class="word-bank-item" data-term="Baseline">Baseline</div>
                </div>
                <div id="definitions-list" class="space-y-4">
                    <div class="word-bank-item" data-answer="Baseline">The original, approved project plan for schedule, cost, and scope against which performance is measured.</div>
                    <div class="word-bank-item" data-answer="Deliverable">Any measurable, tangible result, product, or service that must be produced to complete the project.</div>
                    <div class="word-bank-item" data-answer="Scope Creep">Uncontrolled expansion of project requirements without adjusting the time, cost, or resources.</div>
                    <div class="word-bank-item" data-answer="Critical Path">The sequence of tasks that determines the shortest time possible to complete the project.</div>
                </div>
            </div>
            <div id="vocab-feedback" class="mt-4 p-3 rounded-lg text-center font-semibold hidden"></div>
        </section>

        <section class="mt-8">
            <h2 class="text-2xl font-bold section-title mb-4">Exercise B: Conversation Practice</h2>
            <p class="mb-4 text-gray-300">Select the best word/phrase to fill the gaps in the following conversation between a Project Manager (PM) and a Client. (7 Gaps, 7 Words)</p>
            
            <div id="conversation-options" class="flex flex-wrap gap-2 mb-6">
                <div class="conversation-option" data-word="deliverable">deliverable</div>
                <div class="conversation-option" data-word="milestone">milestone</div>
                <div class="conversation-option" data-word="constraint">constraint</div>
                <div class="conversation-option" data-word="risk">risk</div>
                <div class="conversation-option" data-word="stakeholders">stakeholders</div>
                <div class="conversation-option" data-word="re-evaluate">re-evaluate</div>
                <div class="conversation-option" data-word="budget">budget</div>
            </div>

            <div class="lesson-section p-6 rounded-lg text-lg">
                <p class="mb-4"><strong class="text-red-400">Client:</strong> I've just had an idea—can we add a live analytics dashboard to the final <span class="gap" data-answer="deliverable" data-word-bank="conversation-options"></span>?</p>
                <p class="mb-4"><strong class="text-yellow-400">PM:</strong> That sounds valuable, but it's a significant scope addition. We need to be mindful of the **Triple <span class="gap" data-answer="constraint" data-word-bank="conversation-options"></span>**; a change in scope automatically impacts time or cost. Adding that will push our current <span class="gap" data-answer="milestone" data-word-bank="conversation-options"></span> back by two weeks.</p>
                <p class="mb-4"><strong class="text-red-400">Client:</strong> Two weeks is too long. What if we stick to the original deadline, but use less expensive software licenses? </p>
                <p class="mb-4"><strong class="text-yellow-400">PM:</strong> That poses a major **<span class="gap" data-answer="risk" data-word-bank="conversation-options"></span>** to quality, as those licenses may not meet the security requirements. I recommend we **<span class="gap" data-answer="re-evaluate" data-word-bank="conversation-options"></span>** the entire schedule and discuss the updated **<span class="gap" data-answer="budget" data-word-bank="conversation-options"></span>** with all the key **<span class="gap" data-answer="stakeholders" data-word-bank="conversation-options"></span>** before we proceed.</p>
            </div>
            <button onclick="checkGaps('conversation-options')" class="mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg">Check Conversation</button>
            <div id="conversation-feedback" class="mt-4 p-3 rounded-lg text-center font-semibold hidden"></div>
        </section>

        <section class="mt-8 p-6 rounded-lg bg-gray-700 shadow-inner">
            <h2 class="text-2xl font-bold section-title mb-4">Conclusion</h2>
            <p class="text-lg mb-4 text-gray-300">You have mastered the core vocabulary of the **Triple Constraint**: **Scope, Time, and Cost**. Practice using these terms in your next planning meeting!</p>
            <p class="text-sm text-gray-400">Next Lesson: Project Communication & Reporting.</p>
        </section>

    </div>

    <script>
        let score = 0;
        let totalActivities = 2; // Vocab Matching, Conversation Gap-Fill
        let matchingDone = false;
        let conversationDone = false;
        let selectedWordBankItem = null;
        
        // NEW: Array of colors to cycle through for correct matches
        let matchColorIndex = 0;
        const MATCH_COLORS = ['bg-green-600', 'bg-indigo-600', 'bg-teal-600', 'bg-purple-600']; 


        function updateScore(points) {
            score += points;
            document.getElementById('score-display').textContent = `Score: ${score}`;
        }

        function updateProgress() {
            const activitiesCompleted = (matchingDone ? 1 : 0) + (conversationDone ? 1 : 0);
            const percent = Math.round((activitiesCompleted / totalActivities) * 100);
            document.getElementById('progress-bar').style.width = `${percent}%`;
            document.getElementById('progress-text').textContent = `Progress: ${percent}% Complete`;

            if (percent === 100) {
                alert(`🎉 Congratulations! You completed the Project Management lesson with a score of ${score}!`);
            }
        }

        // --- VOCABULARY MATCHING LOGIC (Exercise A) ---
        function setupMatching() {
            const terms = document.querySelectorAll('#terms-list .word-bank-item');
            const definitions = document.querySelectorAll('#definitions-list .word-bank-item');

            terms.forEach(item => item.addEventListener('click', () => selectWord(item, 'term')));
            definitions.forEach(item => item.addEventListener('click', () => selectWord(item, 'definition')));
        }

        function selectWord(item, type) {
            if (matchingDone || item.classList.contains('matched-correct')) return;

            // Deselect any previously selected item of the same type
            document.querySelectorAll(`#${type === 'term' ? 'terms-list' : 'definitions-list'} .selected`).forEach(el => el.classList.remove('selected', 'incorrect-flash'));

            // Select the current item
            item.classList.add('selected');

            const selectedTerm = document.querySelector('#terms-list .selected');
            const selectedDefinition = document.querySelector('#definitions-list .selected');

            if (selectedTerm && selectedDefinition) {
                if (selectedTerm.dataset.term === selectedDefinition.dataset.answer) {
                    // Correct Match!
                    
                    // Get and apply the next color class
                    const colorClass = MATCH_COLORS[matchColorIndex];
                    matchColorIndex = (matchColorIndex + 1) % MATCH_COLORS.length; // Cycle the index
                    
                    // Apply new color and permanent match styles
                    selectedTerm.classList.add('matched-correct', colorClass);
                    selectedDefinition.classList.add('matched-correct', colorClass);
                    
                    // Remove temporary selection styles
                    selectedTerm.classList.remove('selected');
                    selectedDefinition.classList.remove('selected');
                    
                    // Show custom popup feedback with hammer emoji
                    const feedbackEl = document.getElementById('vocab-feedback');
                    feedbackEl.textContent = "🔨 Correct Match! (+15 Points)";
                    feedbackEl.className = 'mt-4 p-3 rounded-lg text-center font-semibold bg-green-700 text-white';
                    
                    // Hide the message after a short delay
                    setTimeout(() => {
                        // Do not hide if the game is over (all matched)
                        if (!matchingDone) {
                             feedbackEl.classList.add('hidden');
                        }
                    }, 1500);
                    

                    updateScore(15);
                    checkAllMatched();
                } else {
                    // Incorrect Match - Flash Red
                    
                    // Apply flash animation to both selected items
                    selectedTerm.classList.add('incorrect-flash');
                    selectedDefinition.classList.add('incorrect-flash');

                    // Remove selection and flash after animation is visually complete
                    setTimeout(() => {
                        selectedTerm.classList.remove('selected', 'incorrect-flash');
                        selectedDefinition.classList.remove('selected', 'incorrect-flash');
                    }, 1000); 

                    updateScore(-5);
                }
            }
        }

        function checkAllMatched() {
            const unmatchedTerms = document.querySelectorAll('#terms-list .word-bank-item:not(.matched-correct)').length;
            if (unmatchedTerms === 0 && !matchingDone) {
                matchingDone = true;
                const feedbackEl = document.getElementById('vocab-feedback');
                feedbackEl.textContent = "✅ All terms matched correctly! Excellent work!";
                feedbackEl.classList.remove('hidden', 'bg-red-700', 'bg-green-700', 'bg-cyan-700');
                feedbackEl.classList.add('bg-green-700', 'text-white');
                updateProgress();
            }
        }

        // --- CONVERSATION GAP-FILL LOGIC (Exercise B) ---
        function setupGapFill() {
            const options = document.querySelectorAll('#conversation-options .conversation-option');
            const gaps = document.querySelectorAll('.gap[data-word-bank="conversation-options"]');

            options.forEach(option => option.addEventListener('click', () => {
                if (conversationDone) return;
                
                if (option.classList.contains('selected')) {
                    option.classList.remove('selected');
                    selectedWordBankItem = null;
                    return;
                }

                if (selectedWordBankItem) {
                    selectedWordBankItem.classList.remove('selected');
                }
                
                selectedWordBankItem = option;
                selectedWordBankItem.classList.add('selected');
            }));

            gaps.forEach(gap => gap.addEventListener('click', () => {
                if (conversationDone) return;

                const oldWord = gap.dataset.selectedWord;
                
                if (oldWord) {
                    const oldItem = document.querySelector(`.conversation-option[data-word="${oldWord}"]`);
                    if (oldItem) oldItem.style.display = 'block';
                    
                    gap.textContent = '';
                    gap.dataset.selectedWord = '';
                }

                if (selectedWordBankItem) {
                    gap.textContent = selectedWordBankItem.dataset.word;
                    gap.dataset.selectedWord = selectedWordBankItem.dataset.word;
                    
                    selectedWordBankItem.style.display = 'none';
                    selectedWordBankItem.classList.remove('selected');
                    selectedWordBankItem = null;
                }
            }));
        }

        function checkGaps(wordBankId) {
            if (conversationDone) return;
            let correctCount = 0;
            const gaps = document.querySelectorAll(`.gap[data-word-bank="${wordBankId}"]`);
            const feedbackEl = document.getElementById('conversation-feedback');
            
            feedbackEl.classList.remove('hidden', 'bg-green-700', 'bg-red-700');
            
            gaps.forEach(gap => {
                gap.classList.remove('correct-answer', 'incorrect-answer');
                const selectedWord = gap.dataset.selectedWord ? gap.dataset.selectedWord.toLowerCase() : '';
                const answer = gap.dataset.answer.toLowerCase();

                if (selectedWord === answer) {
                    correctCount++;
                    gap.classList.add('correct-answer');
                } else if (selectedWord !== '') {
                    gap.classList.add('incorrect-answer');
                }
            });

            if (correctCount === gaps.length) {
                feedbackEl.textContent = `🎉 Spot On! You filled all ${gaps.length} gaps correctly! Time to manage a project! ⚙️`;
                feedbackEl.classList.add('bg-green-700', 'text-white');
                feedbackEl.classList.remove('bg-red-700');
                conversationDone = true;
                updateScore(30);
                updateProgress();
            } else {
                feedbackEl.textContent = `You got ${correctCount} out of ${gaps.length} correct. Review the sections highlighted in red and try again!`;
                feedbackEl.classList.add('bg-red-700', 'text-white');
                feedbackEl.classList.remove('bg-green-700');
                updateScore(-10);
            }
            feedbackEl.classList.remove('hidden');
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            setupMatching();
            setupGapFill();
        });
    </script>
</body>
</html>
